{# templates/admin/register_affiliate.html.twig #}

{% extends 'base2.html.twig' %}

{% block title %}Add Affiliate{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="canonical" href="https://preview.keenthemes.com/metronic8" />
    <link rel="shortcut icon" href="{{ asset('assets/media/logos/favicon.ico') }}" />
    <!--begin::Fonts(mandatory for all pages)-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700" />
    <!--end::Fonts-->
    <!--begin::Global Stylesheets Bundle(mandatory for all pages)-->
    <link href="{{ asset('assets/plugins/global/plugins.bundle.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('assets/css/style.bundle.css') }}" rel="stylesheet" type="text/css" />

{% endblock %}
{% block body %}


<body id="kt_body" class="app-blank">
<!--begin::Theme mode setup on page load-->
<script>var defaultThemeMode = "light"; var themeMode; if ( document.documentElement ) { if ( document.documentElement.hasAttribute("data-bs-theme-mode")) { themeMode = document.documentElement.getAttribute("data-bs-theme-mode"); } else { if ( localStorage.getItem("data-bs-theme") !== null ) { themeMode = localStorage.getItem("data-bs-theme"); } else { themeMode = defaultThemeMode; } } if (themeMode === "system") { themeMode = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light"; } document.documentElement.setAttribute("data-bs-theme", themeMode); }</script>
<!--end::Theme mode setup on page load-->
<!--begin::Root-->


<div class="d-flex flex-column flex-root" id="kt_app_root">
    <!--begin::Authentication - Sign-up -->
    <div class="d-flex flex-column flex-lg-row flex-column-fluid">
        <!--begin::Body-->
        <div class="d-flex flex-column flex-lg-row-fluid w-lg-50 p-10 order-2 order-lg-1">
            <!--begin::Form-->
            <div class="d-flex flex-center flex-column flex-lg-row-fluid">
                <!--begin::Wrapper-->
                <div class="w-lg-500px p-10">

    <div class="content" style="height: 600px; overflow-y: auto;">
        <h1 class="fw-bold">Add Affiliate</h1>

        <form id="registrationForm">
            {{ form_start(registrationForm) }}
            <br>
            <div class="form-group">
                <label for="firstname" class="form-label">First Name:</label>
                {{ form_widget(registrationForm.firstname, {'attr': {'class': 'form-control'}}) }}
            </div>
            <br>

            <div class="form-group">
                <label for="lastname" class="form-label">Last Name:</label>
                {{ form_widget(registrationForm.lastname, {'attr': {'class': 'form-control'}}) }}
            </div>
            <br>

            <div class="form-group">
                <label for="email" class="form-label">Email:</label>
                {{ form_widget(registrationForm.email, {'attr': {'class': 'form-control'}}) }}
            </div>
            <br>

            <div class="form-group">
                <label for="password" class="form-label">Password:</label>
                {{ form_widget(registrationForm.password, {'attr': {'class': 'form-control'}}) }}
            </div>
            <br>

            <div class="form-group">
                <label for="confirmPassword" class="form-label">Confirm Password:</label>
                {{ form_widget(registrationForm.confirmPassword, {'attr': {'class': 'form-control'}}) }}
            </div>
            <br>

            <div class="form-group">
                <label for="phoneNumber" class="form-label">Phone Number:</label>
                {{ form_widget(registrationForm.phoneNumber, {'attr': {'class': 'form-control'}}) }}
            </div>
            <br>

            <div class="form-group">
                <label for="address" class="form-label">Address:</label>
                {{ form_widget(registrationForm.address, {'attr': {'class': 'form-control'}}) }}
            </div>
            <br>
            <button type="button" id="registerButton" class="btn btn-primary">Register</button>
            {{ form_end(registrationForm) }}
        </form>
        <div id="collapsibleSection" style="display: none;">

        <!--begin::Tabs-->
        <ul class="nav nav-line-tabs nav-stretch nav-line-tabs-2x border-transparent fs-6 fw-bolder mb-10">
            <li class="nav-item">
                <a class="nav-link text-active-primary" data-bs-toggle="tab" href="#kt_modal_add_customer_monthly">Monthly</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-active-primary" data-bs-toggle="tab" href="#kt_modal_add_customer_yearly">Yearly</a>
            </li>
        </ul>
        <!-- end::Tabs -->
            <div class="tab-content">
                <!-- begin::Monthly tab -->
                <div class="tab-pane fade show active" id="kt_modal_add_customer_monthly">
                    <div class="scroll-y me-n7 pe-7" id="kt_modal_add_affiliate_scroll_monthly" data-kt-scroll="true" data-kt-scroll-activate="{default: false, lg: true}" data-kt-scroll-max-height="auto">
                        <!-- Monthly plan inputs here -->
                            <form id="affiliateLinkForm">
                                <div class="fv-row mb-7">
                                    <label for="plan1" class="required fs-6 fw-semibold mb-2">Commission Plan 1 (Monthly)</label>
                                    <input type="number" id="plan1" name="plan1" class="form-control form-control-solid" placeholder="Enter commission for plan 1">
                                </div>
                                <div class="fv-row mb-7">
                                    <label for="plan2" class="required fs-6 fw-semibold mb-2">Commission Plan 2 (Monthly)</label>
                                    <input type="number" id="plan2" name="plan2" class="form-control form-control-solid" placeholder="Enter commission for plan 2">
                                </div>
                                <div class="fv-row mb-7">
                                    <label for="plan3" class="required fs-6 fw-semibold mb-2">Commission Plan 3 (Monthly)</label>
                                    <input type="number" id="plan3" name="plan3" class="form-control form-control-solid" placeholder="Enter commission for plan 3">
                                </div>
                                <div class="fv-row mb-7">
                                    <label for="plan4" class="required fs-6 fw-semibold mb-2">Commission Plan 4 (Monthly)</label>
                                    <input type="number" id="plan4" name="plan4" class="form-control form-control-solid" placeholder="Enter commission for plan 4">
                                </div>
                            </form>
                    </div>
                </div>
                <!-- end::Monthly tab -->

                <!-- begin::Yearly tab -->
                <div class="tab-pane fade" id="kt_modal_add_customer_yearly">
                    <div class="scroll-y me-n7 pe-7" id="kt_modal_add_affiliate_scroll_yearly" data-kt-scroll="true" data-kt-scroll-activate="{default: false, lg: true}" data-kt-scroll-max-height="auto">
                        <!-- Yearly plan inputs here -->
                        <div class="form-wrapper">
                            <form id="affiliateLinkForm">
                                <div class="fv-row mb-7">
                                    <label for="plan5" class="required fs-6 fw-semibold mb-2">Commission Plan 1 (Yearly)</label>
                                    <input type="number" id="plan5" name="plan5" class="form-control form-control-solid" placeholder="Enter commission for plan 1">
                                </div>
                                <div class="fv-row mb-7">
                                    <label for="plan6" class="required fs-6 fw-semibold mb-2">Commission Plan 2 (Yearly)</label>
                                    <input type="number" id="plan6" name="plan6" class="form-control form-control-solid" placeholder="Enter commission for plan 2">
                                </div>
                                <div class="fv-row mb-7">
                                    <label for="plan7" class="required fs-6 fw-semibold mb-2">Commission Plan 3 (Yearly)</label>
                                    <input type="number" id="plan7" name="plan7" class="form-control form-control-solid" placeholder="Enter commission for plan 3">
                                </div>
                                <div class="fv-row mb-7">
                                    <label for="plan8" class="required fs-6 fw-semibold mb-2">Commission Plan 4 (Yearly)</label>
                                    <input type="number" id="plan8" name="plan8" class="form-control form-control-solid" placeholder="Enter commission for plan 4">
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- end::Yearly tab -->
            </div>

            <button type="button" id="generateAffiliateLinkButton" class="btn btn-primary">Generate Affiliate Link</button>

            <a href="{{ path('app_login') }}" style="background-color: #ddb0b0; color: #ffffff; padding: 10px 20px; border-radius: 5px; text-decoration: none; display: inline-block;">Login</a>
            <br>
        </div>


    </div>

                </div>
                <!--end::Wrapper-->
            </div>
            <!--end::Form-->

            <!--begin::Footer-->
            <div class="w-lg-500px d-flex flex-stack px-10 mx-auto">

                <!--begin::Links-->
                <div class="d-flex fw-semibold text-primary fs-base gap-5">
                    <a href="{{ asset('pages/team.html') }}" target="_blank">Terms</a>
                    <a href="{{ asset('pages/pricing/column.html') }}" target="_blank">Plans</a>
                    <a href="{{ asset('pages/contact.html') }}" target="_blank">Contact Us</a>
                </div>
                <!--end::Links-->
            </div>
            <!--end::Footer-->
        </div>
        <!--end::Body-->
        <!--begin::Aside-->
        <div class="d-flex flex-lg-row-fluid w-lg-50 bgi-size-cover bgi-position-center order-1 order-lg-2" style="background-image: url({{ asset('assets/media/misc/auth-bg.png') }})
                ">
            <!--begin::Content-->
            <div class="d-flex flex-column flex-center py-7 py-lg-15 px-5 px-md-15 w-100">
                <!--begin::Logo-->
                <a href="index.html" class="mb-0 mb-lg-12">

                    <img alt="Logo" src="{{ asset('assets/media/logos/custom-1.png') }}" class="h-60px h-lg-75px" />
                </a>
                <!--end::Logo-->
                <!--begin::Image-->
                <img class="d-none d-lg-block mx-auto w-275px w-md-50 w-xl-500px mb-10 mb-lg-20" src="{{ asset('assets/media/misc/auth-screens.png') }}" alt="" />
                <!--end::Image-->
                <!--begin::Title-->
                <h1 class="d-none d-lg-block text-white fs-2qx fw-bolder text-center mb-7">Fast, Efficient and Productive</h1>
                <!--end::Title-->
                <!--begin::Text-->
                <div class="d-none d-lg-block text-white fs-base text-center">In this kind of post,
                    <a href="#" class="opacity-75-hover text-warning fw-bold me-1">the blogger</a>introduces a person theyâ€™ve interviewed
                    <br />and provides some background information about
                    <a href="#" class="opacity-75-hover text-warning fw-bold me-1">the interviewee</a>and their
                    <br />work following this is a transcript of the interview.</div>
                <!--end::Text-->
            </div>
            <!--end::Content-->
        </div>
        <!--end::Aside-->
    </div>
    <!--end::Authentication - Sign-up-->
</div>


<!--begin::Javascript-->
{% block javascripts %}
    {{ parent() }}
    <script> var hostUrl = "{{ asset('assets/') }}";</script>
    <!--begin::Global Javascript Bundle(mandatory for all pages)-->
    <script src="{{ asset('assets/plugins/global/plugins.bundle.js') }}"></script>
    <script src="{{ asset('assets/js/scripts.bundle.js') }}"></script>
    <!--end::Global Javascript Bundle-->
    <!--begin::Custom Javascript(used for this page only)-->
    <script src="{{ asset('assets/js/custom/authentication/sign-up/general.js') }}"></script>
    <!--end::Custom Javascript-->
    <!--end::Javascript-->

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            var form = document.getElementById('registrationForm');
            var registerButton = document.getElementById('registerButton');
            var collapsibleSection = document.getElementById('collapsibleSection');
            var generateAffiliateLinkButton = document.getElementById('generateAffiliateLinkButton');

            registerButton.addEventListener('click', function() {
                // Submit the form via AJAX
                var formData = new FormData(form);
                fetch('{{ path('admin_register_affiliate') }}', {
                    method: 'POST',
                    body: formData
                })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            // Show the collapsible section
                            collapsibleSection.style.display = 'block';
                        } else {
                            alert('Registration failed. Please try again.');
                        }
                    })
                    .catch(error => {
                        console.error('Error:', error);
                        alert('An error occurred. Please try again.');
                    });
            });

            generateAffiliateLinkButton.addEventListener('click', function() {
                // Redirect to the controller route for generating the affiliate link
                window.location.href = '{{ path('admin_generate_affiliate_link') }}'
                    + '?plan1=' + document.getElementById('plan1').value
                    + '&plan2=' + document.getElementById('plan2').value
                    + '&plan3=' + document.getElementById('plan3').value
                    + '&plan4=' + document.getElementById('plan4').value
                    + '&plan5=' + document.getElementById('plan5').value
                    + '&plan6=' + document.getElementById('plan6').value
                    + '&plan7=' + document.getElementById('plan7').value
                    + '&plan8=' + document.getElementById('plan8').value;
            });
        });


    </script>
{% endblock %}
</body>
{% endblock %}
